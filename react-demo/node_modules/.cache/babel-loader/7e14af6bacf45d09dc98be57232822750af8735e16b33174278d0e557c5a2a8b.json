{"ast":null,"code":"import _regeneratorRuntime from \"/home/ioana/Desktop/Energy Management System/react-demo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/ioana/Desktop/Energy Management System/react-demo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _jsxFileName = \"/home/ioana/Desktop/Energy Management System/react-demo/src/navigation-bar.js\",\n  _this = this;\nimport React from 'react';\nimport logo from './commons/images/icon.png';\nimport { Navbar } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar buttonStyle = {\n  backgroundColor: 'transparent',\n  border: 'none',\n  color: 'white',\n  cursor: 'pointer',\n  fontSize: '20px',\n  marginLeft: 'auto'\n};\nvar NavigationBar = function NavigationBar() {\n  var currentPath = window.location.pathname;\n  var handleLogout = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var token, response;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            token = localStorage.getItem('token');\n            if (!token) {\n              _context.next = 6;\n              break;\n            }\n            _context.next = 4;\n            return fetch('http://localhost:8080/auth/logout', {\n              method: 'POST',\n              headers: {\n                'Authorization': \"Bearer \".concat(token),\n                'Content-Type': 'application/json'\n              }\n            });\n          case 4:\n            response = _context.sent;\n            if (response.ok) {\n              localStorage.clear();\n              console.log('Logout successful');\n              window.alert('Logout successful');\n              window.location.href = '/';\n            } else {\n              console.error('Logout failed');\n            }\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function handleLogout() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var insertNewUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            window.location.href = '/admin/newUser';\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function insertNewUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var insertNewDevice = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            window.location.href = '/admin/newDevice';\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n    return function insertNewDevice() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var navigateHome = function navigateHome() {\n    if (currentPath === '/admin/users' || currentPath === '/admin/devices' || currentPath === '/admin/newUser') {\n      window.location.href = '/admin';\n    } else if (currentPath.startsWith('/user')) {\n      window.location.href = '/user';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Navbar, {\n      color: \"dark\",\n      light: true,\n      expand: \"md\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: navigateHome,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          width: \"50\",\n          height: \"35\",\n          alt: \"Logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, _this), currentPath === '/admin/users' ? /*#__PURE__*/_jsxDEV(\"button\", {\n        style: buttonStyle,\n        onClick: insertNewUser,\n        children: \"Insert new user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, _this) : null, currentPath === '/admin/devices' ? /*#__PURE__*/_jsxDEV(\"button\", {\n        style: buttonStyle,\n        onClick: insertNewDevice,\n        children: \"Insert new device\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, _this) : null, currentPath === '/user' || currentPath.startsWith('/admin') ? /*#__PURE__*/_jsxDEV(\"button\", {\n        style: buttonStyle,\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, _this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, _this);\n};\n_c = NavigationBar;\nexport default NavigationBar;\nvar _c;\n$RefreshReg$(_c, \"NavigationBar\");","map":{"version":3,"names":["React","logo","Navbar","jsxDEV","_jsxDEV","buttonStyle","backgroundColor","border","color","cursor","fontSize","marginLeft","NavigationBar","currentPath","window","location","pathname","handleLogout","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","wrap","_callee$","_context","prev","next","localStorage","getItem","fetch","method","headers","concat","sent","ok","clear","console","log","alert","href","error","stop","apply","arguments","insertNewUser","_ref2","_callee2","_callee2$","_context2","insertNewDevice","_ref3","_callee3","_callee3$","_context3","navigateHome","startsWith","children","light","expand","onClick","src","width","height","alt","fileName","_jsxFileName","lineNumber","columnNumber","_this","style","_c","$RefreshReg$"],"sources":["/home/ioana/Desktop/Energy Management System/react-demo/src/navigation-bar.js"],"sourcesContent":["import React from 'react';\nimport logo from './commons/images/icon.png';\nimport { Navbar } from 'reactstrap';\n\nconst buttonStyle = {\n  backgroundColor: 'transparent',\n  border: 'none',\n  color: 'white',\n  cursor: 'pointer',\n  fontSize: '20px',\n  marginLeft: 'auto',\n};\n\nconst NavigationBar = () => {\n  const currentPath = window.location.pathname;\n\n  const handleLogout = async () => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      const response = await fetch('http://localhost:8080/auth/logout', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (response.ok) {\n        localStorage.clear();\n        console.log('Logout successful');\n        window.alert('Logout successful');\n        window.location.href = '/';\n      } else {\n        console.error('Logout failed');\n      }\n    }\n  };\n\n  const insertNewUser = async () => {\n    window.location.href = '/admin/newUser';\n  };\n\n  const insertNewDevice = async () => {\n    window.location.href = '/admin/newDevice';\n  };\n\n  const navigateHome = () => {\n    if (currentPath === '/admin/users' || currentPath === '/admin/devices' || currentPath === '/admin/newUser') {\n      window.location.href = '/admin';\n    } else if (currentPath.startsWith('/user')) {\n      window.location.href = '/user';\n    }\n  };\n\n  return (\n    <div>\n      <Navbar color=\"dark\" light expand=\"md\">\n        <button onClick={navigateHome}>\n          <img src={logo} width=\"50\" height=\"35\" alt=\"Logo\" />\n        </button>\n        {currentPath === '/admin/users' ? (\n          <button style={buttonStyle} onClick={insertNewUser}>\n            Insert new user\n          </button>\n        ) : null}\n        {currentPath === '/admin/devices' ? (\n          <button style={buttonStyle} onClick={insertNewDevice}>\n            Insert new device\n          </button>\n        ) : null}\n        {currentPath === '/user' || currentPath.startsWith('/admin') ? (\n          <button style={buttonStyle} onClick={handleLogout}>\n            Logout\n          </button>\n        ) : null}\n      </Navbar>\n    </div>\n  );\n};\n\nexport default NavigationBar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
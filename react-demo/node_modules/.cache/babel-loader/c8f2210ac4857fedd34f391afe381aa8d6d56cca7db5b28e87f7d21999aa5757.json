{"ast":null,"code":"import _slicedToArray from \"/home/ioana/Desktop/Energy Management System/react-demo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/home/ioana/Desktop/Energy Management System/react-demo/src/client/user.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport SockJsClient from 'react-stomp';\nvar SOCKET_URL = 'http://localhost:8281/websocket';\nvar UserDevices = function UserDevices() {\n  _s();\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    message = _useState2[0],\n    setMessage = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    showNotification = _useState4[0],\n    setShowNotification = _useState4[1];\n  var onConnected = function onConnected() {\n    console.log('Connected!!');\n  };\n  var onMessageReceived = function onMessageReceived(msg) {\n    setMessage(msg.message);\n    setShowNotification(true);\n  };\n  useEffect(function () {\n    var notificationTimer;\n    if (showNotification) {\n      notificationTimer = setTimeout(function () {\n        setShowNotification(false);\n        setMessage(''); // Clear message after notification duration\n      }, 7000); // 7 seconds\n    }\n\n    return function () {\n      clearTimeout(notificationTimer); // Cleanup timer on unmount or state change\n    };\n  }, [showNotification]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SockJsClient, {\n    url: SOCKET_URL,\n    topics: ['/topic/message'],\n    onConnect: onConnected,\n    onDisconnect: function onDisconnect() {\n      return console.log('Disconnected!');\n    },\n    onMessage: function onMessage(msg) {\n      return onMessageReceived(msg);\n    },\n    debug: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }), showNotification && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"popup-notification\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, message)));\n};\n_s(UserDevices, \"1dW1At23Fg742XlpGLduy61Bjgo=\");\n_c = UserDevices;\nexport default UserDevices;\nvar _c;\n$RefreshReg$(_c, \"UserDevices\");","map":{"version":3,"names":["React","useEffect","useState","SockJsClient","SOCKET_URL","UserDevices","_s","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","showNotification","setShowNotification","onConnected","console","log","onMessageReceived","msg","notificationTimer","setTimeout","clearTimeout","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","url","topics","onConnect","onDisconnect","onMessage","debug","className","_c","$RefreshReg$"],"sources":["/home/ioana/Desktop/Energy Management System/react-demo/src/client/user.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport SockJsClient from 'react-stomp';\n\nconst SOCKET_URL = 'http://localhost:8281/websocket';\n\nconst UserDevices = () => {\n    const [message, setMessage] = useState('');\n    const [showNotification, setShowNotification] = useState(false);\n\n    let onConnected = () => {\n        console.log('Connected!!');\n    };\n\n    let onMessageReceived = (msg) => {\n        setMessage(msg.message);\n        setShowNotification(true);\n    };\n\n    useEffect(() => {\n        let notificationTimer;\n        if (showNotification) {\n            notificationTimer = setTimeout(() => {\n                setShowNotification(false);\n                setMessage(''); // Clear message after notification duration\n            }, 7000); // 7 seconds\n        }\n\n        return () => {\n            clearTimeout(notificationTimer); // Cleanup timer on unmount or state change\n        };\n    }, [showNotification]);\n\n    return (\n        <div>\n            <SockJsClient\n                url={SOCKET_URL}\n                topics={['/topic/message']}\n                onConnect={onConnected}\n                onDisconnect={() => console.log('Disconnected!')}\n                onMessage={(msg) => onMessageReceived(msg)}\n                debug={false}\n            />\n            {showNotification && (\n                <div className=\"popup-notification\">\n                    <p>{message}</p>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default UserDevices;"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAGC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAChD,OAAOC,YAAY,MAAM,aAAa;AAEtC,IAAMC,UAAU,GAAG,iCAAiC;AAEpD,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;EAAAC,EAAA;EACtB,IAAAC,SAAA,GAA8BL,QAAQ,CAAC,EAAE,CAAC;IAAAM,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAnCG,OAAO,GAAAF,UAAA;IAAEG,UAAU,GAAAH,UAAA;EAC1B,IAAAI,UAAA,GAAgDV,QAAQ,CAAC,KAAK,CAAC;IAAAW,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAxDE,gBAAgB,GAAAD,UAAA;IAAEE,mBAAmB,GAAAF,UAAA;EAE5C,IAAIG,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;IACpBC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;EAC9B,CAAC;EAED,IAAIC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,GAAG,EAAK;IAC7BT,UAAU,CAACS,GAAG,CAACV,OAAO,CAAC;IACvBK,mBAAmB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAEDd,SAAS,CAAC,YAAM;IACZ,IAAIoB,iBAAiB;IACrB,IAAIP,gBAAgB,EAAE;MAClBO,iBAAiB,GAAGC,UAAU,CAAC,YAAM;QACjCP,mBAAmB,CAAC,KAAK,CAAC;QAC1BJ,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;MACpB,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IACd;;IAEA,OAAO,YAAM;MACTY,YAAY,CAACF,iBAAiB,CAAC,CAAC,CAAC;IACrC,CAAC;EACL,CAAC,EAAE,CAACP,gBAAgB,CAAC,CAAC;EAEtB,oBACId,KAAA,CAAAwB,aAAA;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACI/B,KAAA,CAAAwB,aAAA,CAACrB,YAAY;IACT6B,GAAG,EAAE5B,UAAW;IAChB6B,MAAM,EAAE,CAAC,gBAAgB,CAAE;IAC3BC,SAAS,EAAElB,WAAY;IACvBmB,YAAY,EAAE,SAAAA,aAAA;MAAA,OAAMlB,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAAA,CAAC;IACjDkB,SAAS,EAAE,SAAAA,UAAChB,GAAG;MAAA,OAAKD,iBAAiB,CAACC,GAAG,CAAC;IAAA,CAAC;IAC3CiB,KAAK,EAAE,KAAM;IAAAZ,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAChB,CAAC,EACDjB,gBAAgB,iBACbd,KAAA,CAAAwB,aAAA;IAAKc,SAAS,EAAC,oBAAoB;IAAAb,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/B/B,KAAA,CAAAwB,aAAA;IAAAC,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAIrB,OAAW,CACd,CAER,CAAC;AAEd,CAAC;AAACJ,EAAA,CA5CID,WAAW;AAAAkC,EAAA,GAAXlC,WAAW;AA8CjB,eAAeA,WAAW;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}